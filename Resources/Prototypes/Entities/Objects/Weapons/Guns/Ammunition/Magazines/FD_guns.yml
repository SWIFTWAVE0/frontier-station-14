- type: entity
  id: FDMagazineGrenadeBaton
  name: baton extended cartridge
  parent: BaseMagazineGrenade
  components:
  - type: BallisticAmmoProvider
    proto: GrenadeBaton
    mayTransfer: true
    whitelist:
      tags:
        - Grenade
    capacity: 60
    soundRack:
      path: /Audio/Weapons/Guns/Bolt/lmg_bolt_closed.ogg
      params:
        variation: 0.05
    soundInsert:
      path: /Audio/Weapons/Guns/MagIn/rifle_load.ogg
      params:
        variation: 0.05

- type: entity
  id: FDMagazineRocketLauncher
  name: missile cartridge
  parent: BaseMagazineGrenade
  components:
  - type: BallisticAmmoProvider
    proto: GrenadeFrag
    mayTransfer: true
    whitelist:
      tags:
        - Grenade
    capacity: 6
    soundRack:
      path: /Audio/Weapons/Guns/Bolt/lmg_bolt_closed.ogg
      params:
        variation: 0.05
    soundInsert:
      path: /Audio/Weapons/Guns/MagIn/rifle_load.ogg
      params:
        variation: 0.05
  - type: Sprite
    sprite: _FD/Structures/rocketcartridge.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-5
      map: ["enum.GunVisualLayers.Mag"]

- type: entity
  id: ShuttleGunMissile
  parent: [ShuttleGunBase] # Frontier: Removed ConstructibleMachine
  name: EXP-BARRAGE "Devastator"
  description: Stationary missile launcher, firing explosive rods.
  categories: [ DoNotMap ]
  components:
  - type: Sprite
    sprite: _FD/Structures/rocketlauncher.rsi
    layers:
    - state: space_artillery
  - type: ContainerContainer
    containers:
      machine_board: !type:Container
      machine_parts: !type:Container
      ballistic-ammo: !type:Container
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
        - !type:ChangeConstructionNodeBehavior
          node: machineFrame
        - !type:DoActsBehavior
          acts: ["Destruction"]
  - type: Gun
    projectileSpeed: 50
    fireRate: 8
    angleDecay: 45
    minAngle: 0
    maxAngle: 15
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/rpgfire.ogg
      params:
        pitch: 0.8
    soundEmpty:
      path: /Audio/Weapons/Guns/Empty/empty.ogg
  - type: BallisticAmmoProvider
    whitelist:
      tags:
        - Grenade
    capacity: 6
    soundInsert:
      path: /Audio/Weapons/Guns/MagIn/batrifle_magin.ogg
  - type: Machine
    board: ShuttleGunMissileCircuitboard
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        priority: 2
        whitelist:
          tags:
          - MagazineGrenade
        insertSound:
          path: /Audio/Weapons/Guns/MagIn/kinetic_reload.ogg
          params:
            pitch: 2
        ejectSound: /Audio/Weapons/Guns/MagOut/smg_magout.ogg

- type: entity
  id: ShuttleGun50cal
  parent: [ShuttleGunBase] # Frontier: Removed ConstructibleMachine
  name: 50-CAL "Liberty"
  description: Stationary flak cannon, firing small baton grenades.
  categories: [ DoNotMap ]
  components:
  - type: Sprite
    sprite: _FD/Structures/flak.rsi
    layers:
    - state: space_artillery
  - type: ContainerContainer
    containers:
      machine_board: !type:Container
      machine_parts: !type:Container
      ballistic-ammo: !type:Container
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
        - !type:ChangeConstructionNodeBehavior
          node: machineFrame
        - !type:DoActsBehavior
          acts: ["Destruction"]
  - type: Gun
    projectileSpeed: 90
    fireRate: 5
    angleDecay: 45
    minAngle: 0
    maxAngle: 15
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/ship_friendship.ogg
      params:
        pitch: 0.8
    soundEmpty:
      path: /Audio/Weapons/Guns/Empty/empty.ogg
  - type: Machine
    board: ShuttleGun50calCircuitboard
  - type: MagazineAmmoProvider
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        priority: 2
        whitelist:
          tags:
          - MagazineGrenade
        insertSound:
          path: /Audio/Weapons/Guns/MagIn/kinetic_reload.ogg
          params:
            pitch: 2
        ejectSound: /Audio/Weapons/Guns/MagOut/smg_magout.ogg

- type: entity
  id: ShuttleGun50calCircuitboard
  parent: BaseMachineCircuitboard
  name: 50-CAL "Liberty" machine board
  description: A machine printed circuit board for an 50-CAL "Liberty".
  suffix: DO NOT MAP, Machine Board
  categories: [ DoNotMap ]
  components:
  - type: Sprite
    state: security
  - type: MachineBoard
    prototype: ShuttleGun50cal
    requirements: # Frontier
      MatterBin: 3 # Frontier stackRequirements<requirements
      Manipulator: 2 # Frontier stackRequirements<requirements
    stackRequirements:
      Steel: 30
      CableHV: 5

- type: entity
  id: ShuttleGunMissileCircuitboard
  parent: BaseMachineCircuitboard
  name: EXP-BARRAGE "Devastator" machine board
  description: A machine printed circuit board for an EXP-BARRAGE "Devastator".
  suffix: DO NOT MAP, Machine Board
  categories: [ DoNotMap ]
  components:
  - type: Sprite
    state: security
  - type: MachineBoard
    prototype: ShuttleGun50cal
    requirements: # Frontier
      MatterBin: 6 # Frontier stackRequirements<requirements
      Manipulator: 4 # Frontier stackRequirements<requirements
    stackRequirements:
      Steel: 50
      CableHV: 5
      Uranium: 5
      Gold: 5


# Funny hull-eating thing

- type: entity
  id: ShuttleGunHulleater
  parent: [ ShuttleGunBase, ConstructibleMachine]
  name: Зуб
  description: Длинный зуб минералопожирающего существа из дальнего космоса. Под такой лучше не попадаться.
  categories: [ DoNotMap ]
  components:
  - type: Sprite
    sprite: _FD/Structures/claw.rsi
    layers:
    - state: claw
  - type: ContainerContainer
    containers:
      machine_board: !type:Container
      machine_parts: !type:Container
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 900
      behaviors:
        - !type:ChangeConstructionNodeBehavior
          node: machineFrame
        - !type:DoActsBehavior
          acts: ["Destruction"]
  - type: Gun
    projectileSpeed: 60
    fireRate: 3
    selectedMode: SemiAuto
    angleDecay: 45
    minAngle: 5
    maxAngle: 15
    availableModes:
    - SemiAuto
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/kinetic_accel.ogg
      params:
        variation: 0.12
  - type: RechargeBasicEntityAmmo
    rechargeCooldown: 1
    rechargeSound:
      path: /Audio/Weapons/Guns/Bolt/lmg_bolt_closed.ogg
      params:
        pitch: 1.2
        variation: 0.08
  - type: BasicEntityAmmoProvider
    proto: BulletTendrilShuttle
    capacity: 30
    count: 30
  - type: Machine
    board: ShuttleGunKineticCircuitboard
  - type: ExtensionCableReceiver # Frontier
  - type: ApcPowerReceiver # Frontier
    powerLoad: 1500 # Frontier

- type: entity
  id: BulletTendrilShuttle
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    noRot: false
    sprite: Objects/Weapons/Guns/Projectiles/magic.rsi
    color: "#FF8888" # Frontier: color it red vs. handheld bolts
    layers:
    - state: chronobolt
      shader: unshaded
  - type: Projectile
    impactEffect: BulletImpactEffectKinetic
    damage:
      types:
        Blunt: 900
        Heat: 900
        Structural: 900
  - type: Ammo
    muzzleFlash: HitscanEffect
  - type: TimedDespawn
    lifetime: 0.5
  - type: PointLight
    radius: 2.5
    color: "#FF8888"
    energy: 0.5
  - type: GatheringProjectile
  - type: MiningGatheringHard
  - type: MiningGatheringUnfloor
